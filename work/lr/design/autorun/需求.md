# 自动测试需求

## 总出发点

自动跑游戏中某些玩法的所有关卡,发现某些由于测试覆盖率不够而忽略的bug, \
这些bug主要是脚本和配置引起,当然也可能是客户端底层本身存在问题.

## 需求列表

### 概览

整个测试工具主要由三部分构成

- 输入文件: 用于控制测试的相关参数
- 客户端: 就是LR的游戏客户端
- 输出文件: 包含战斗结果的文件

### 输入文件

- 玩家队伍配置,可以配置多个玩家队伍
    - 武将配置: 譬如"张飞,法正,黄忠"
    - 阵型: 1对应前排,2对应后排,配置"2,1,2"表示三个武将按照"后前后"的方式来排列
    - 属性百分比: 0.2表示属性增加20%,这里的属性只涉及攻防血即可
- 关卡配置,一个玩法对应到dungeon表中的某个子表,譬如主线副本对应的是[story_dungeon]
    - 玩法的开启和关闭: 玩法开启状态,才跑测试
    - 某个玩法中需要忽略的关卡: 譬如可以配置忽略"剧情本1-1",那么在测试的时候,不会跑"剧情本1-1"

### 输出文件

包含每一场测试的结果,包括

- 关卡名字
- 使用玩家的队伍
- 运行时间
- 关卡胜利或失败

### 其它需求

- 断点续测: 测试报错后,下一次运行从之前报错的用例继续测试
- 命令行参数支持,类似于:
    `lr.exe --auto-run=1 --input=auto_run.xml --output=result.txt --resolution=960X640`
    其中:
        - auto-run 表示是否启动auto_run模式
        - input 输入文件
        - output 输出文件
        - resolution 分辨率
